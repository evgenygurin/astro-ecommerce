---
import Layout from '../layouts/Layout.astro';
import '../../assets/scss/astro-ecommerce.scss';
import Navbar from '../components/navbar';
import ComplexNavbar from '../components/complexNavbar';
import ComplexNavbarDark from '../components/complexNavbarDark';
import Footer from '../components/footer';
import ComplexFooter from '../components/complexFooter';
import ProductOverviewGrid from '../components/products/productOverviewGrid';
import ProductOverviewGallery from '../components/products/productOverviewGallery';
import ShoppingCart from '../components/cart/shoppingCart';
import ShoppingCart2 from '../components/cart/shoppingCart2';
import ProductQuickview from '../components/products/productQuickview';
import ProductQuickview2 from '../components/products/productQuickview2';
import ProductFeature from '../components/products/productFeature';
import ProductFeature2 from '../components/products/productFeature2';
import CategoryFilters from '../components/products/categoryFilters';
import TestimonialsFade from '../components/promo/testimonialsFade';
import PromoSectionLarge from '../components/promo/promoSectionLarge';
import CheckoutOrderSummary from '../components/checkout/checkoutOrderSummary';
import CheckoutMultiStep from '../components/checkout/checkoutMultiStep';
import ReviewSimple from '../components/reviews/reviewSimple';
import ReviewSummaryChart from '../components/reviews/reviewSummaryChart';
import OrderSummaries from '../components/order/orderSummaries';
import OrderHistory from '../components/order/orderHistory';
import IncentiveLarge from '../components/incentives/incentiveLarge';
import IncentiveCols from '../components/incentives/incentiveCols';

// Dynamic Components
import ProductList from '../components/products/ProductList.tsx';
import CategoryList from '../components/categories/CategoryList.tsx';

// Note: The commented-out components below still need to be refactored to fetch data from the API.
---

<script>
  function toggleHeart(e) {
    e.target.classList.toggle('fas');
    e.target.classList.toggle('far');
    e.target.classList.toggle('text-danger');
  }
  
  // This event listener might need to be moved to a more specific component later.
  document.addEventListener('click', function(event) {
    if (event.target && event.target.id === 'heart1') {
      toggleHeart(event);
    }
  });
</script>

<Layout title="Astro Ecommerce">
	<main>
    <Navbar />
    <div class="container mt-5">
      <h3>Product Lists</h3>
      <p>This product list is now loading data dynamically from the FastAPI backend.</p>
      <ProductList client:load />

      <CategoryList client:load />

      {/* 
      <div class="row mb-5">
        <div class="d-block text-center mb-5">
          <h3>Shop by category</h3>
          <a class="text-dark font-weight-bold" href="#">Browse all categories &#62;</a>
        </div>
        <div class="col-md-6">
          <CardCategory
            classList = "h-100"
            cta = ""
            thumb_src = {"/images/category4.jpg"}
            title = {"Living Sofas"}
          />
        </div>
        <div class="col-md-6">
          <div class="mb-4">
            <CardCategory
              classList = ""
              cta = ""
              thumb_src={"/images/category5.jpg"}
              title={"Chairs by Designers"}
            />
          </div>
          <div>
            <CardCategory
              classList = ""
              cta = ""
              thumb_src={"/images/product9.jpg"}
              title={"Home care"}
            />
          </div>
        </div>
      </div>


      <div class="my-10">
        <h3>Product Overview</h3>
        <p class="mb-5">With image grid</p>
        <ProductOverviewGrid />
      </div>

      <div class="my-5">
        <h3>Product Overview</h3>
        <p class="mb-5">Product Overviews with image gallery and expandable details</p>
        <ProductOverviewGallery />
      </div>

      <div class="my-10">
        <ShoppingCart products={[]}/>
      </div>

      <div class="my-10">
        <ShoppingCart2 products={[]}/>
      </div>

      <div class="my-10">
        <h3>Category filters</h3>
        <p class="mb-5">With inline actions and expandable sidebar filters</p>
        <CategoryFilters title="Our products" />
      </div>

      <div class="my-10">
        <h3>Product Quickviewers</h3>
        <p class="mb-5">With color selector, size selector, and details link</p>
        <ProductQuickview />

        <h3 class="mt-7">Product Quickviewers</h3>
        <p class="mb-5">With large size selector</p>
        <ProductQuickview2 />
      </div>

      <div class="my-10">
        <ProductFeature />
      </div>

      <div class="my-10">
        <ProductFeature2 />
      </div>

      <div class="my-10">
        <h3 class="mt-5">Complex Navbar White</h3>
        <a class="text-dark font-weight-bold" href="#">Browse all categories &#62;</a>
        <br/><br/>
        <ComplexNavbar />
      </div>

      <div class="my-10">
        <h3 class="mt-5">Complex Navbar Dark</h3>
        <a class="text-dark font-weight-bold" href="#">Browse all categories &#62;</a>
        <br/><br/>
        <ComplexNavbarDark />
      </div>

      <div class="my-10">
        <h3>Simple Footer</h3>
        <Footer />

        <h3 class="mt-8">Complex Footer</h3>
        <ComplexFooter />
      </div>

      <div class="my-10">
        <h3 class="mt-5">Promo Sections</h3>
        <p class="text-body">Full-width with background image and large content</p>
        <TestimonialsFade 
          pageHeaderBgImg={"https://images.unsplash.com/photo-1534802046520-4f27db7f3ae5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2729&q=80"} 
          pageHeaderMinVh="50vh"
        />
      </div>

      <div class="my-10">
        <h3 class="mt-5">Promo Sections</h3>
        <p class="text-body">With fading background image and testimonials</p>
        <PromoSectionLarge 
          title={"Placeholder Title"}
          full_description="Placeholder description..."  
          pageHeaderBgImg={"https://images.unsplash.com/photo-1525904097878-94fb15835963?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2370&q=80"} 
          pageHeaderMinVh="50vh"
          pageHeaderRadius="1rem"
        />
      </div>

      <div class="my-10">
        <h3>Checkout Forms</h3>
        <p>Split with order summary</p>
        <CheckoutOrderSummary products={[]}/>
      </div>

      <div class="my-10">
        <h3>Checkout Forms</h3>
        <p>SWith order summary sidebar</p>
        <CheckoutMultiStep products={[]}/>
      </div>

      <div class="my-10">
        <h3 class="mt-5">Product reviews</h3>
        <p class="text-body">Simple with avatars</p>
        <ReviewSimple reviews={[]}/>
      </div>

      <div class="my-10">
        <h3 class="mt-5">Product reviews</h3>
        <p class="text-body">With summary chart</p>
        <ReviewSummaryChart reviews={[]}/>
      </div>

      <div class="my-10">
        <h3 class="mt-5">Order Summaries</h3>
        <p class="text-body">With order summary sidebar</p>
        <OrderSummaries order={{}} products={[]} />
      </div>

      <div class="my-10">
        <OrderHistory orders={[]} products={[]} />
      </div>
      */}

      <div class="my-10">
        <IncentiveLarge />
      </div>

      <div class="my-10">
        <h3 class="mt-5">Features</h3>
        <p class="text-body">3-column with illustrations and header</p>
        <IncentiveCols />
      </div>
      
      <Footer />
    </div>
	</main>
</Layout>